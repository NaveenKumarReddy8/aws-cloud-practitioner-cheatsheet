# AWS Cloud Practitioner Cheat Sheet

## Shared Responsibility Model
* Customer = Responsibility for the security **in** the cloud.
* AWS = Responsibility for the security **of** the cloud.

## IAM - Identity and Access Management (Global Service)

Users or Groups can be assigned JSON documents called **Policies**

Ex:

```json
{
  "Version": "2012-10-17",
  "Id": "S3-account-permissions",
  "Statement": [
    {
      "Sid": "1",
      "Effect": "Allow",
      "Principal": {
        "AWS": ["arn:aws:iam::xxxxxxxxxx:root"]
      },
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],
      "Resource": ["arn:aws:s3:::mybucket/*"]
    }
  ]
}
```

* **Version**: Policy language version.
* **Id [Optional]** An identifier for the policy.
* **Statement** One or more individual statements.
* **Sid [Optional]**: An identifier of the statement.
* **Effect [Allow, Deny]**: Whether statement allows or denies access.
* **Principal**: account/user/role to which this policy applied to.
* **Action**: list of actions this policy allows or denies.
* **Resources**: list of resources to which the actions applies to. **'*'** refers to all resources.

_Tags_ are optional and are present for almost all services in AWS. They are Key-Value pairs.

### Multi-Factor Authentication (MFA):

* Virtual MFA Device - Google Authenticator, Authy etc...
* Physical

### How to access AWS

* AWS Management Console: Password + MFA[Optional]
* AWS Command Line Interface (CLI): Access Keys
* AWS Software Development Kit (SDK)- For code: Access Keys

#### Using AWS CLI
After creating the access keys:

```shell
aws configure
```
and Enter the access key ID, secret access key, region name

### IAM Roles
IAM roles are for services to access the AWS.

Common roles:
* EC2 Instance roles
* Lambda function roles
* Roles for CloudFormation

### IAM Security Tools

* IAM Credentials Report (Account level): A report that lists all your account's users and status of their various credentials.
* IAM Access Advisor (user-level): Access Advisor shows the service permissions granted to a user and when those services were last accessed.

## Budget Setup
We can view the various bills generated by using the AWS services, look at free tier quota and predictions for breaching free tier quota.

We can create budget which notifies whenever the budget is breached. Some templates are **Zero spend budget**, **Monthly cost budget** etc...

## Elastic Compute Cloud (EC2)

* EC2 is one of the most popular of AWS's offerings.
* EC2 = Elastic Compute Cloud = Infrastructure as a service.
* It mainly consists in the capability of:
  * Renting Virtual machines (EC2)
  * Storing data on virtual drives (EBS)
  * Distributing load across machines (ELB)
  * Scaling the services using an auto-scaling group (ASG)

### EC2 Sizing & Configuration options

* Operating System (OS): Linux, Windows or macOS
* How much compute power & cores (CPU)
* How much RAM
* How much Storage space:
  * Network-attached (EBS & EFS)
  * Hardware (EC2 instance store)
* Network card: speed of the card, Public IP Address.
* Firewall rules: Security Group
* Bootstrap Script (configure at first launch): EC2 User Data

### EC2 User Data

* It is possible to bootstrap our instances using an **EC2 User Data** script.
* **bootstrapping** means launching commands when a machine starts.
* The script is only run once at the instance first start
* EC2 user data is used to automate boot tasks such as:
  * Installing updates
  * Installing software
  * Downloading common files from the internet etc...